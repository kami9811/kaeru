{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{zFnc:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"EditPageModule\",(function(){return edit_module_EditPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),global_service=__webpack_require__(\"dVwY\"),ngx=__webpack_require__(\"Bfh1\");function EditPage_div_11_Template(rf,ctx){if(1&rf&&(core.Mb(0,\"div\"),core.Ib(1,\"ion-img\",19),core.Lb()),2&rf){const ctx_r0=core.Wb();core.xb(1),core.Zb(\"src\",ctx_r0.image)}}const routes=[{path:\"\",component:(()=>{class EditPage{constructor(gs,geolocation,alertController,router,route){this.gs=gs,this.geolocation=geolocation,this.alertController=alertController,this.router=router,this.route=route,this.imageFlag=!1,this.imgHeight=600,this.title=\"\",this.text=\"\",this.article_id=0,this.postObj={},this.returnObj={},this.ccpp=0,this.python=0,this.web=0,this.server=0,this.native=0,this.iot=0,this.ccppFill=\"outline\",this.pythonFill=\"outline\",this.webFill=\"outline\",this.serverFill=\"outline\",this.nativeFill=\"outline\",this.iotFill=\"outline\",this.loadPicture=e=>{console.log(e);var file=e.srcElement.files[0],fileReader=new FileReader,img=new Image;fileReader.onloadend=()=>{img.onload=()=>{console.log(\"Image Processing\");const imgType=img.src.substring(5,img.src.indexOf(\";\")),imgWidth=img.width*(this.imgHeight/img.height),canvas=document.createElement(\"canvas\");canvas.width=imgWidth,canvas.height=this.imgHeight,canvas.getContext(\"2d\").drawImage(img,0,0,imgWidth,this.imgHeight),this.image=canvas.toDataURL(imgType),console.log(this.image)},img.src=fileReader.result,this.imageFlag=!0},file&&fileReader.readAsDataURL(file)},this.postArticle=()=>{this.geolocation.getCurrentPosition().then(resp=>{this.latitude=resp.coords.latitude,this.longitude=resp.coords.longitude,this.postObj.id=localStorage.id,this.postObj.article_id=this.article_id,this.postObj.prefecture=localStorage.prefecture,this.postObj.latitude=this.latitude,this.postObj.longitude=this.longitude,this.postObj.title=this.title,this.postObj.text=this.text,this.postObj.image=this.image;var image_check=0;this.imageFlag&&(image_check=1),this.postObj.image_check=image_check,this.postObj.ccpp=this.ccpp,this.postObj.python=this.python,this.postObj.web=this.web,this.postObj.server=this.server,this.postObj.native=this.native,this.postObj.iot=this.iot,this.postObj.attribute=localStorage.attribute,this.postObj.hash=localStorage.hash,this.gs.http(\"https://kn46itblog.com/hackathon/winter2020/php_apis/registerDiaryArticle.php\",this.postObj).subscribe(res=>{console.log(res),this.navigate(),this.alertPost()},error=>console.error(error))},error=>console.error(error))},this.navigate=()=>{this.router.navigate([\"/tabs\",\"tab\"+this.tab,\"edited\"])},this.onGrid=e=>{console.log(\"ON GRID!!\"),\"ccpp\"==e.target.id?0==this.ccpp?(this.ccppFill=\"solid\",this.ccpp=1):(this.ccppFill=\"outline\",this.ccpp=0):\"python\"==e.target.id?0==this.python?(this.pythonFill=\"solid\",this.python=1):(this.pythonFill=\"outline\",this.python=0):\"web\"==e.target.id?0==this.web?(this.webFill=\"solid\",this.web=1):(this.webFill=\"outline\",this.web=0):\"server\"==e.target.id?0==this.server?(this.serverFill=\"solid\",this.server=1):(this.serverFill=\"outline\",this.server=0):\"native\"==e.target.id?0==this.native?(this.nativeFill=\"solid\",this.native=1):(this.nativeFill=\"outline\",this.native=0):\"iot\"==e.target.id&&(0==this.iot?(this.iotFill=\"solid\",this.iot=1):(this.iotFill=\"outline\",this.iot=0))}}ngOnInit(){this.route.params.subscribe(params=>{this.tab=params.tab},error=>console.error(error))}alertPost(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({message:\"日誌が投稿されました\",buttons:[\"OK\"]});yield alert.present()}))}}return EditPage.ɵfac=function(t){return new(t||EditPage)(core.Hb(global_service.a),core.Hb(ngx.a),core.Hb(ionic_angular.a),core.Hb(router.g),core.Hb(router.a))},EditPage.ɵcmp=core.Bb({type:EditPage,selectors:[[\"app-edit\"]],decls:45,vars:9,consts:[[\"slot\",\"start\"],[\"id\",\"back\"],[1,\"button-area\",\"ion-padding\"],[\"for\",\"file-button\",\"id\",\"file-button-label\"],[\"type\",\"file\",\"accept\",\"image/*\",\"id\",\"file-button\",3,\"change\"],[4,\"ngIf\"],[\"id\",\"category-center\",1,\"ion-text-center\",\"ion-padding-top\"],[3,\"click\"],[\"id\",\"ccpp\",\"expand\",\"block\",\"color\",\"ccpp-three\",3,\"fill\"],[\"id\",\"python\",\"expand\",\"block\",\"color\",\"python-three\",3,\"fill\"],[\"id\",\"web\",\"expand\",\"block\",\"color\",\"web-three\",3,\"fill\"],[\"id\",\"server\",\"expand\",\"block\",\"color\",\"server-three\",3,\"fill\"],[\"id\",\"native\",\"expand\",\"block\",\"color\",\"native-three\",3,\"fill\"],[\"id\",\"iot\",\"expand\",\"block\",\"color\",\"iot-three\",3,\"fill\"],[3,\"submit\"],[\"position\",\"floating\"],[\"required\",\"\",\"type\",\"text\",\"name\",\"title\",3,\"ngModel\",\"ngModelChange\"],[\"name\",\"text\",3,\"ngModel\",\"ngModelChange\"],[\"id\",\"post-article-button\",\"type\",\"submit\",\"expand\",\"block\",\"color\",\"base-green\"],[\"id\",\"image\",3,\"src\"]],template:function(rf,ctx){1&rf&&(core.Mb(0,\"ion-header\"),core.Mb(1,\"ion-toolbar\"),core.Mb(2,\"ion-buttons\",0),core.Ib(3,\"ion-back-button\",1),core.Lb(),core.Mb(4,\"ion-title\"),core.jc(5,\"編集ページ\"),core.Lb(),core.Lb(),core.Lb(),core.Mb(6,\"ion-content\"),core.Mb(7,\"div\",2),core.Mb(8,\"label\",3),core.jc(9,\"日誌の写真を選択\"),core.Lb(),core.Mb(10,\"input\",4),core.Ub(\"change\",(function($event){return ctx.loadPicture($event)})),core.Lb(),core.Lb(),core.ic(11,EditPage_div_11_Template,2,1,\"div\",5),core.Mb(12,\"div\",6),core.jc(13,\" 投稿日誌のカテゴリを選択してください \"),core.Lb(),core.Mb(14,\"ion-grid\",7),core.Ub(\"click\",(function($event){return ctx.onGrid($event)})),core.Mb(15,\"ion-row\"),core.Mb(16,\"ion-col\"),core.Mb(17,\"ion-button\",8),core.jc(18,\"C/C++\"),core.Lb(),core.Lb(),core.Mb(19,\"ion-col\"),core.Mb(20,\"ion-button\",9),core.jc(21,\"Python\"),core.Lb(),core.Lb(),core.Mb(22,\"ion-col\"),core.Mb(23,\"ion-button\",10),core.jc(24,\"Web系\"),core.Lb(),core.Lb(),core.Lb(),core.Mb(25,\"ion-row\"),core.Mb(26,\"ion-col\"),core.Mb(27,\"ion-button\",11),core.jc(28,\"Server\"),core.Lb(),core.Lb(),core.Mb(29,\"ion-col\"),core.Mb(30,\"ion-button\",12),core.jc(31,\"ネイティブ\"),core.Lb(),core.Lb(),core.Mb(32,\"ion-col\"),core.Mb(33,\"ion-button\",13),core.jc(34,\"IoT\"),core.Lb(),core.Lb(),core.Lb(),core.Lb(),core.Mb(35,\"form\",14),core.Ub(\"submit\",(function(){return ctx.postArticle()})),core.Mb(36,\"ion-item\"),core.Mb(37,\"ion-label\",15),core.jc(38,\"タイトル\"),core.Lb(),core.Mb(39,\"ion-input\",16),core.Ub(\"ngModelChange\",(function($event){return ctx.title=$event})),core.Lb(),core.Mb(40,\"ion-label\",15),core.jc(41,\"本文\"),core.Lb(),core.Mb(42,\"ion-textarea\",17),core.Ub(\"ngModelChange\",(function($event){return ctx.text=$event})),core.Lb(),core.Lb(),core.Mb(43,\"ion-button\",18),core.jc(44,\"投稿する\"),core.Lb(),core.Lb(),core.Lb()),2&rf&&(core.xb(11),core.Zb(\"ngIf\",ctx.imageFlag),core.xb(6),core.Zb(\"fill\",ctx.ccppFill),core.xb(3),core.Zb(\"fill\",ctx.pythonFill),core.xb(3),core.Zb(\"fill\",ctx.webFill),core.xb(4),core.Zb(\"fill\",ctx.serverFill),core.xb(3),core.Zb(\"fill\",ctx.nativeFill),core.xb(3),core.Zb(\"fill\",ctx.iotFill),core.xb(6),core.Zb(\"ngModel\",ctx.title),core.xb(3),core.Zb(\"ngModel\",ctx.text))},directives:[ionic_angular.q,ionic_angular.F,ionic_angular.f,ionic_angular.c,ionic_angular.d,ionic_angular.E,ionic_angular.m,common.i,ionic_angular.p,ionic_angular.x,ionic_angular.l,ionic_angular.e,fesm2015_forms.i,fesm2015_forms.e,fesm2015_forms.f,ionic_angular.u,ionic_angular.v,ionic_angular.t,ionic_angular.N,fesm2015_forms.h,fesm2015_forms.d,fesm2015_forms.g,ionic_angular.D,ionic_angular.s],styles:[\"#file-button-label[_ngcontent-%COMP%]{text-align:center;font-size:1em;color:#000;background-color:#cbf266;border-radius:10px;padding:12px 30px;display:block;margin-left:auto;margin-right:auto;width:100%}#file-button[_ngcontent-%COMP%]{display:none}#image[_ngcontent-%COMP%]{height:300px}#post-article-button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:90%}#category-center[_ngcontent-%COMP%]{font-size:1em;font-weight:700}\"]}),EditPage})()}];let edit_routing_module_EditPageRoutingModule=(()=>{class EditPageRoutingModule{}return EditPageRoutingModule.ɵmod=core.Fb({type:EditPageRoutingModule}),EditPageRoutingModule.ɵinj=core.Eb({factory:function(t){return new(t||EditPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),EditPageRoutingModule})(),edit_module_EditPageModule=(()=>{class EditPageModule{}return EditPageModule.ɵmod=core.Fb({type:EditPageModule}),EditPageModule.ɵinj=core.Eb({factory:function(t){return new(t||EditPageModule)},imports:[[common.b,fesm2015_forms.a,ionic_angular.G,edit_routing_module_EditPageRoutingModule]]}),EditPageModule})()}}]);","extractedComments":[]}