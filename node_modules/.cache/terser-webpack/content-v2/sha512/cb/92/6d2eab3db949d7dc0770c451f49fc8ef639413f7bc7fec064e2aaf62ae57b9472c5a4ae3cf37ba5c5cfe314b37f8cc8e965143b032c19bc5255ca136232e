{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{tmrb:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"Tab1PageModule\",(function(){return tab1_module_Tab1PageModule}));var ionic_angular=__webpack_require__(\"TEn/\"),common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),explore_container_module=__webpack_require__(\"qtYk\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),ngx=__webpack_require__(\"Bfh1\"),global_service=__webpack_require__(\"dVwY\");function Tab1Page_ng_container_5_Template(rf,ctx){if(1&rf&&(core.Kb(0),core.Mb(1,\"ion-card\",9),core.Mb(2,\"ion-card-header\",10),core.Mb(3,\"ion-card-subtitle\"),core.hc(4),core.Ib(5,\"br\"),core.hc(6),core.Lb(),core.Mb(7,\"ion-card-title\"),core.hc(8),core.Lb(),core.Lb(),core.Lb(),core.Jb()),2&rf){const a_r1=ctx.$implicit;core.xb(1),core.Zb(\"color\",\"\",a_r1.category_color,\"-\",a_r1.category_level,\"\"),core.xb(1),core.ac(\"routerLink\",\"/article/1/\",a_r1.article_id,\"/\",a_r1.title,\"/\",a_r1.text,\"/\",a_r1.id,\"\"),core.xb(2),core.kc(\"[\",a_r1.distance.toFixed(1),\"km] \",a_r1.id,\"さんの投稿\"),core.xb(2),core.ic(a_r1.date),core.xb(2),core.ic(a_r1.title)}}const routes=[{path:\"\",component:(()=>{class Tab1Page{constructor(geolocation,alertController,router,gs){this.geolocation=geolocation,this.alertController=alertController,this.router=router,this.gs=gs,this.latitude=0,this.longitude=0,this.postObj={},this.returnObj={},this.articleObj={},this.articleList=[],this.onGps=()=>{this.geolocation.getCurrentPosition().then(resp=>{this.latitude=resp.coords.latitude,this.longitude=resp.coords.longitude,this.alertGps()}).catch(error=>{console.log(\"Error getting location\",error)})},this.navigateToSelf=()=>{this.router.navigate([\"/self\",1,\"1\"])},this.navigateToEdit=()=>{this.router.navigate([\"/edit\",1])},this.getList=()=>{this.geolocation.getCurrentPosition().then(resp=>{this.latitude=resp.coords.latitude,this.longitude=resp.coords.longitude,this.postObj.hash=localStorage.hash,this.postObj.latitude=this.latitude,this.postObj.longitude=this.longitude,this.postObj.distance=Number(localStorage.distance),this.postObj.tab=1,this.postObj.attribute=localStorage.attribute;const body=this.postObj;console.log(body),this.gs.http(\"https://kn46itblog.com/hackathon/winter2020/php_apis/getDiaryArticle.php\",body).subscribe(res=>{console.log(res),this.articleObj=res,this.articleList=[];for(let i=0;i<this.articleObj.article_num;i++)this.objWord=\"article\"+(i+1),1==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level=\"one\":2==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level=\"two\":3==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level=\"three\":4==this.articleObj.article_list[this.objWord].category_level?this.articleObj.article_list[this.objWord].category_level=\"four\":5==this.articleObj.article_list[this.objWord].category_level&&(this.articleObj.article_list[this.objWord].category_level=\"five\"),this.articleList.push(this.articleObj.article_list[this.objWord]);console.log(this.articleList)},error=>console.error(error))}).catch(error=>{console.log(\"Error getting location\",error)})}}ngOnInit(){console.log(\"Init!\"),this.postObj.id=localStorage.id,this.postObj.password=localStorage.password,this.postObj.prefecture=localStorage.prefecture;const body=this.postObj;console.log(body),this.gs.http(\"https://kn46itblog.com/hackathon/winter2020/php_apis/login.php\",body).subscribe(res=>{this.returnObj=res,200==this.returnObj.status?(localStorage.hash=this.returnObj.hash,this.getList()):this.router.navigate([\"/login\"])},error=>console.error(error)),this.interval=setInterval(()=>{this.getList()},1500)}alertGps(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){const alert=yield this.alertController.create({header:\"座標が観測されました\",message:\"緯度: \"+this.latitude+\"<br>経度: \"+this.longitude,buttons:[\"OK\"]});yield alert.present()}))}}return Tab1Page.ɵfac=function(t){return new(t||Tab1Page)(core.Hb(ngx.a),core.Hb(ionic_angular.a),core.Hb(router.g),core.Hb(global_service.a))},Tab1Page.ɵcmp=core.Bb({type:Tab1Page,selectors:[[\"app-tab1\"]],decls:12,vars:3,consts:[[3,\"translucent\"],[\"id\",\"icon\",\"src\",\"../../assets/icon/icon.png\"],[3,\"fullscreen\"],[4,\"ngFor\",\"ngForOf\"],[\"vertical\",\"bottom\",\"horizontal\",\"start\",\"slot\",\"fixed\"],[\"color\",\"base-green\",3,\"click\"],[\"name\",\"newspaper-outline\"],[\"vertical\",\"bottom\",\"horizontal\",\"end\",\"slot\",\"fixed\"],[\"name\",\"add-outline\"],[\"button\",\"true\",3,\"color\"],[3,\"routerLink\"]],template:function(rf,ctx){1&rf&&(core.Mb(0,\"ion-header\",0),core.Mb(1,\"ion-toolbar\"),core.Mb(2,\"ion-title\"),core.Ib(3,\"ion-img\",1),core.Lb(),core.Lb(),core.Lb(),core.Mb(4,\"ion-content\",2),core.gc(5,Tab1Page_ng_container_5_Template,9,10,\"ng-container\",3),core.Mb(6,\"ion-fab\",4),core.Mb(7,\"ion-fab-button\",5),core.Tb(\"click\",(function(){return ctx.navigateToSelf()})),core.Ib(8,\"ion-icon\",6),core.Lb(),core.Lb(),core.Mb(9,\"ion-fab\",7),core.Mb(10,\"ion-fab-button\",5),core.Tb(\"click\",(function(){return ctx.navigateToEdit()})),core.Ib(11,\"ion-icon\",8),core.Lb(),core.Lb(),core.Lb()),2&rf&&(core.Yb(\"translucent\",!0),core.xb(4),core.Yb(\"fullscreen\",!0),core.xb(1),core.Yb(\"ngForOf\",ctx.articleList))},directives:[ionic_angular.q,ionic_angular.F,ionic_angular.E,ionic_angular.s,ionic_angular.m,common.h,ionic_angular.n,ionic_angular.o,ionic_angular.r,ionic_angular.g,ionic_angular.i,ionic_angular.K,router.h,ionic_angular.j,ionic_angular.k],styles:[\"\"]}),Tab1Page})()}];let tab1_routing_module_Tab1PageRoutingModule=(()=>{class Tab1PageRoutingModule{}return Tab1PageRoutingModule.ɵmod=core.Fb({type:Tab1PageRoutingModule}),Tab1PageRoutingModule.ɵinj=core.Eb({factory:function(t){return new(t||Tab1PageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),Tab1PageRoutingModule})(),tab1_module_Tab1PageModule=(()=>{class Tab1PageModule{}return Tab1PageModule.ɵmod=core.Fb({type:Tab1PageModule}),Tab1PageModule.ɵinj=core.Eb({factory:function(t){return new(t||Tab1PageModule)},imports:[[ionic_angular.G,common.b,fesm2015_forms.a,explore_container_module.a,tab1_routing_module_Tab1PageRoutingModule]]}),Tab1PageModule})()}}]);","extractedComments":[]}